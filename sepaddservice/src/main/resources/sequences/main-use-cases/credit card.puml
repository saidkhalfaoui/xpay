@startuml
'https://plantuml.com/sequence-diagram
actor "Card Holder" as holder
entity "Merchant" as merchant
entity "service provider/partner" as mobyyou
participant "HenriPay Engine" as HenriPay
participant "Spell"
participant "Issuer" as issuer
holder->merchant: user enters credit card details
merchant-> mobyyou: add transaction
mobyyou->HenriPay: add credit card transaction (recurring)
HenriPay->HenriPay: validators , business rules
HenriPay-> "Spell": /purchace/userinfo
"Spell"--> HenriPay : {direct_post_url}
HenriPay->"Spell": direct_post_url/purchase {(recurring)}
"Spell"->"Spell": processing checks...
"Spell"-> issuer: authroization request
issuer --> "Spell" : authorization response
"Spell"-->HenriPay: transaction completion {sucess}
HenriPay->"Spell": /direct_post_url/charge {delayed}
HenriPay-->mobyyou: transaction completion

@enduml